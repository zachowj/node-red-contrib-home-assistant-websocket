<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.26" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <link rel="icon" href="/node-red-contrib-home-assistant-websocket/favicon.ico" size="32x32"><link rel="icon" href="/node-red-contrib-home-assistant-websocket/icon.svg" type="image/svg+xml"><title>Get History | node-red-contrib-home-assistant-websocket</title><meta name="description" content="A suite of nodes that seamlessly integrates Home Assistant with Node-RED">
    <link rel="preload" href="/node-red-contrib-home-assistant-websocket/assets/style-CIMY1NKL.css" as="style"><link rel="stylesheet" href="/node-red-contrib-home-assistant-websocket/assets/style-CIMY1NKL.css">
    <link rel="modulepreload" href="/node-red-contrib-home-assistant-websocket/assets/app-DL7QLekj.js"><link rel="modulepreload" href="/node-red-contrib-home-assistant-websocket/assets/get-history.html-BL5SU3gt.js">
    <link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/FAQ.html-Coq3C9ji.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/index.html-CDyo3gqH.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/actionable-notifications-subflow-for-android.html-Bpyu6XjD.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/check-if-an-entity-was-turned-on-in-the-last-24-hours.html-Q_3VN2Sc.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/events-by-label.html-B42DUsH-.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/expiration-date-monitor.html-CvCQZooL.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/get-state_changed-events-based-on-area.html-GsJbLQ3o.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/holiday-lights-scheduler-and-demo-mode-for-wled.html-DyPYpxp4.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/index.html-D5LadJsL.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/motion-triggered-light.html-Dz-Tv1mz.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/play-jellyfin-show-using-sentence-node.html-B-_-4QlV.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/saving-and-restoring-states.html-DJYuUX3y.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/starting-flow-after-home-assistant-restart.html-CVcpzHDg.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/sun-events.html-BQxgCw4f.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/using-date-and-time-entities-to-trigger-flows.html-kymPIjRL.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/vacation-mode.html-BPOgPTFB.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/action.html-vEXfVoue.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/breaking-changes.html-BfrQheNx.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/conditionals.html-AsonptHz.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/development.html-Bkt43caU.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/diagnostics.html-Bxil3vpz.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/documentation.html-DXZ9JoDE.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/first-automation.html-BCA8YJz6.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/index.html-D9wq8put.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/issues.html-22aKzzKK.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/migration.html-DaB8EYyv.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/mustache-templates.html-BjGwg9mT.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/output-properties.html-BVo-PY-O.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/index.html-k3aYTuXS.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/API.html-D78Ok6YA.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/action.html-BmcjP-v7.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/binary-sensor.html-Yv6k94IU.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/button.html-CYH2Skon.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/config-server.html-BZUeCasQ.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/current-state.html-CYLojKwv.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/device-config.html-TXUA421_.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/device.html-CJt-8ixG.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/entity-config.html-CeBFBduB.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/entity.html-B7K1kNcp.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/events-all.html-C-4fA_Wt.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/events-calendar.html-DeiN0oaY.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/events-state.html-DZtce9tH.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/fire-event.html-DdYWG1Ys.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/get-entities.html-h9qONHiE.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/index.html-DdmKYDQo.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/number.html-Cs687bWy.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/poll-state.html-CxNUb2bP.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/render-template.html-CssB-P9u.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/select.html-Dpsv74ld.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/sensor.html-DKx5iHvq.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/sentence.html-Bn1L0Uwp.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/switch.html-DmfLH9_1.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/tag.html-BBht3OuB.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/text.html-CeH7lLmb.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/time-entity.html-mTE-y505.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/time.html-BU9rm5ux.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/trigger-state.html-DcE6usdt.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/update-config.html-DjWgqsZN.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/wait-until.html-CJbVSTUL.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/webhook.html-CwyxdLX8.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/zone.html-CqN1wFjd.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/action.html-U3gwng26.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/change-node.html-C2dad3DC.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/current-state.html-B7mfOnnK.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/events-state.html-BIhlIn3d.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/functions.html-BDlUv69G.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/sensor.html-DPRjp5sZ.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/switch-node.html-B_7rxorp.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/trigger-state.html-B381zeTW.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/index.html-NEfXm5Z-.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/exposed-nodes.html-B2Hbcw7J.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/index.html-V-guNtjm.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/index.html-BijGSNUf.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/jsonata-primer.html-C06H_4VR.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/404.html-XEr5LzU-.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/DocsOnly-UcDh0XA5.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/InfoPanelOnly-DtRab5cJ.js" as="script"><link rel="prefetch" href="/node-red-contrib-home-assistant-websocket/assets/Scrubber-BQhsnDZ0.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/node-red-contrib-home-assistant-websocket/"><img class="vp-site-logo" src="/node-red-contrib-home-assistant-websocket/logo-256.png" alt="node-red-contrib-home-assistant-websocket"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">node-red-contrib-home-assistant-websocket</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/node-red-contrib-home-assistant-websocket/guide/" aria-label="Guides"><!--[--><!--[--><!--]--><!--]-->Guides<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/node-red-contrib-home-assistant-websocket/node/" aria-label="Nodes"><!--[--><!--[--><!--]--><!--]-->Nodes<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/node-red-contrib-home-assistant-websocket/FAQ.html" aria-label="FAQ"><!--[--><!--[--><!--]--><!--]-->FAQ<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/node-red-contrib-home-assistant-websocket/cookbook/" aria-label="Cookbook"><!--[--><!--[--><!--]--><!--]-->Cookbook<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/node-red-contrib-home-assistant-websocket/scrubber/" aria-label="Scrubber"><!--[--><!--[--><!--]--><!--]-->Scrubber<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/zachowj/node-red-contrib-home-assistant-websocket/discussions" aria-label="Discussions" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Discussions<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://discord.gg/QNdsZgNBnU" aria-label="Discord" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Discord<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/zachowj/node-red-contrib-home-assistant-websocket" aria-label="Github" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Github<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="Search" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/node-red-contrib-home-assistant-websocket/guide/" aria-label="Guides"><!--[--><!--[--><!--]--><!--]-->Guides<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link route-link-active auto-link" href="/node-red-contrib-home-assistant-websocket/node/" aria-label="Nodes"><!--[--><!--[--><!--]--><!--]-->Nodes<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/node-red-contrib-home-assistant-websocket/FAQ.html" aria-label="FAQ"><!--[--><!--[--><!--]--><!--]-->FAQ<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/node-red-contrib-home-assistant-websocket/cookbook/" aria-label="Cookbook"><!--[--><!--[--><!--]--><!--]-->Cookbook<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/node-red-contrib-home-assistant-websocket/scrubber/" aria-label="Scrubber"><!--[--><!--[--><!--]--><!--]-->Scrubber<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/zachowj/node-red-contrib-home-assistant-websocket/discussions" aria-label="Discussions" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Discussions<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://discord.gg/QNdsZgNBnU" aria-label="Discord" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Discord<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/zachowj/node-red-contrib-home-assistant-websocket" aria-label="Github" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->Github<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Config Nodes <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/device-config.html" aria-label="Device Config"><!--[--><!--[--><!--]--><!--]-->Device Config<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/entity-config.html" aria-label="Entity Config"><!--[--><!--[--><!--]--><!--]-->Entity Config<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/config-server.html" aria-label="Server Config"><!--[--><!--[--><!--]--><!--]-->Server Config<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active collapsible">General Nodes <span class="down arrow"></span></p><ul class="vp-sidebar-children" style=""><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/action.html" aria-label="Action"><!--[--><!--[--><!--]--><!--]-->Action<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/API.html" aria-label="API"><!--[--><!--[--><!--]--><!--]-->API<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/current-state.html" aria-label="Current State"><!--[--><!--[--><!--]--><!--]-->Current State<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/device.html" aria-label="Device"><!--[--><!--[--><!--]--><!--]-->Device<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/events-all.html" aria-label="Events: all"><!--[--><!--[--><!--]--><!--]-->Events: all<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/events-calendar.html" aria-label="Events: calendar"><!--[--><!--[--><!--]--><!--]-->Events: calendar<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/events-state.html" aria-label="Events: state"><!--[--><!--[--><!--]--><!--]-->Events: state<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/fire-event.html" aria-label="Fire Event"><!--[--><!--[--><!--]--><!--]-->Fire Event<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/get-entities.html" aria-label="Get Entities"><!--[--><!--[--><!--]--><!--]-->Get Entities<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/node-red-contrib-home-assistant-websocket/node/get-history.html" aria-label="Get History"><!--[--><!--[--><!--]--><!--]-->Get History<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/poll-state.html" aria-label="Poll State"><!--[--><!--[--><!--]--><!--]-->Poll State<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/render-template.html" aria-label="Render Template"><!--[--><!--[--><!--]--><!--]-->Render Template<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/sentence.html" aria-label="Sentence"><!--[--><!--[--><!--]--><!--]-->Sentence<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/tag.html" aria-label="Tag"><!--[--><!--[--><!--]--><!--]-->Tag<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/time.html" aria-label="Time"><!--[--><!--[--><!--]--><!--]-->Time<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/trigger-state.html" aria-label="Trigger: state"><!--[--><!--[--><!--]--><!--]-->Trigger: state<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/wait-until.html" aria-label="Wait Until"><!--[--><!--[--><!--]--><!--]-->Wait Until<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/webhook.html" aria-label="Webhook"><!--[--><!--[--><!--]--><!--]-->Webhook<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/zone.html" aria-label="Zone"><!--[--><!--[--><!--]--><!--]-->Zone<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">Entity Nodes <span class="right arrow"></span></p><ul class="vp-sidebar-children" style="display:none;"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/binary-sensor.html" aria-label="Binary Sensor"><!--[--><!--[--><!--]--><!--]-->Binary Sensor<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/button.html" aria-label="Button"><!--[--><!--[--><!--]--><!--]-->Button<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/entity.html" aria-label="Entity"><!--[--><!--[--><!--]--><!--]-->Entity<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/number.html" aria-label="Number"><!--[--><!--[--><!--]--><!--]-->Number<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/select.html" aria-label="Select"><!--[--><!--[--><!--]--><!--]-->Select<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/sensor.html" aria-label="Sensor"><!--[--><!--[--><!--]--><!--]-->Sensor<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/switch.html" aria-label="Switch"><!--[--><!--[--><!--]--><!--]-->Switch<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/text.html" aria-label="Text"><!--[--><!--[--><!--]--><!--]-->Text<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/time-entity.html" aria-label="Time"><!--[--><!--[--><!--]--><!--]-->Time<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/node-red-contrib-home-assistant-websocket/node/update-config.html" aria-label="Update Config"><!--[--><!--[--><!--]--><!--]-->Update Config<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div id="content"><h1 id="get-history" tabindex="-1"><a class="header-anchor" href="#get-history"><span>Get History</span></a></h1><p>The Get History node fetches the history of Home Assistant entities based on input criteria. This can be used to analyze past states or events, such as tracking temperature changes over time or reviewing when a door was last opened. Itâ€™s useful for creating more complex automations based on historical data.</p><h2 id="configuration" tabindex="-1"><a class="header-anchor" href="#configuration"><span>Configuration</span></a></h2><h3 id="entity-id" tabindex="-1"><a class="header-anchor" href="#entity-id"><span>Entity ID</span></a></h3><ul><li>Type: <code>string</code></li></ul><p>The entity id to fetch history for. Can be a single entity id or a comma separated list of entity ids.</p><h3 id="entity-id-type" tabindex="-1"><a class="header-anchor" href="#entity-id-type"><span>Entity ID Type</span></a></h3><ul><li>Type: <code>string</code></li><li>Values: <code>==</code> | <code>regex</code></li></ul><p>The type of entity id matching to use. <code>==</code> will do an exact match, <code>regex</code> will use a regular expression to match the entity ids.</p><h3 id="start-date" tabindex="-1"><a class="header-anchor" href="#start-date"><span>Start Date</span></a></h3><ul><li>Type: <code>string</code></li><li>Values: ISO Formattted Date</li><li>Default: 24 hours prior</li></ul><p>Date to start fetching history from. Will override the configuration if passed in. If <code>relativetime</code> is used this will be ignored.</p><p><strong>Also See:</strong></p><ul><li><a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/ISO_8601</a></li></ul><h3 id="end-date" tabindex="-1"><a class="header-anchor" href="#end-date"><span>End Date</span></a></h3><ul><li>Type: <code>string</code></li><li>Values: ISO Formattted Date</li><li>Default: 24 hours from start date</li></ul><p>The end date to fetch history too. Will override the configuration if passed in. If <code>relativetime</code> is used this will be ignored.</p><p><strong>Also See:</strong></p><ul><li><a href="https://en.wikipedia.org/wiki/ISO_8601" target="_blank" rel="noopener noreferrer">https://en.wikipedia.org/wiki/ISO_8601</a></li></ul><h3 id="use-relative-time" tabindex="-1"><a class="header-anchor" href="#use-relative-time"><span>Use Relative Time</span></a></h3><ul><li>Type: <code>boolean</code></li></ul><p>A checkbox to use relative time or not. If checked the <code>startdate</code> and <code>enddate</code> will be ignored and the <code>relativetime</code> will be used instead.</p><h3 id="in-the-last" tabindex="-1"><a class="header-anchor" href="#in-the-last"><span>In the Last</span></a></h3><ul><li>Type: <code>string</code></li></ul><p>A time string that will be parsed the following keywords into time values.</p><p>Example: <code>4h 30m</code> = The last 4 hours and 30 minutes</p><div class="language-text" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">ms, milli, millisecond, milliseconds - will parse to milliseconds</span>
<span class="line">s, sec, secs, second, seconds - will parse to seconds</span>
<span class="line">m, min, mins, minute, minutes - will parse to minutes</span>
<span class="line">h, hr, hrs, hour, hours - will parse to hours</span>
<span class="line">d, day, days - will parse to days</span>
<span class="line">w, week, weeks - will parse to weeks</span>
<span class="line">mon, mth, mths, month, months - will parse to months</span>
<span class="line">y, yr, yrs, year, years - will parse to years</span>
<span class="line"></span></code></pre></div><h3 id="flatten-results" tabindex="-1"><a class="header-anchor" href="#flatten-results"><span>Flatten Results</span></a></h3><p>Instead of returning the data from home assistant ( array for each entity_id ) return one flattened array of one item per history entry</p><h3 id="output-types" tabindex="-1"><a class="header-anchor" href="#output-types"><span>Output Types</span></a></h3><ul><li>Type: <code>string</code></li><li>Values: <code>array</code> | <code>split</code></li><li>Default: <code>array</code></li></ul><p>The type of output to return. <code>array</code> will return an array of history objects. <code>split</code> will return an array of history objects for each entity id.</p><h2 id="inputs" tabindex="-1"><a class="header-anchor" href="#inputs"><span>Inputs</span></a></h2><p>All properties of <code>msg.payload</code></p><h3 id="entityid" tabindex="-1"><a class="header-anchor" href="#entityid"><span>entityId</span></a></h3><ul><li>Type: <code>string</code></li></ul><h3 id="entityidtype" tabindex="-1"><a class="header-anchor" href="#entityidtype"><span>entityIdType</span></a></h3><ul><li>Type: <code>equal</code> | <code>regex</code></li></ul><h3 id="startdate" tabindex="-1"><a class="header-anchor" href="#startdate"><span>startDate</span></a></h3><ul><li>Type: <code>string</code></li><li>Values: ISO Formattted Date</li></ul><h3 id="enddate" tabindex="-1"><a class="header-anchor" href="#enddate"><span>endDate</span></a></h3><ul><li>Type: <code>string</code></li><li>Values: ISO Formattted Date</li></ul><h3 id="relativetime" tabindex="-1"><a class="header-anchor" href="#relativetime"><span>relativeTime</span></a></h3><ul><li>Type: <code>string</code></li></ul><h3 id="flatten" tabindex="-1"><a class="header-anchor" href="#flatten"><span>flatten</span></a></h3><ul><li>Type: <code>boolean</code></li></ul><h2 id="outputs" tabindex="-1"><a class="header-anchor" href="#outputs"><span>Outputs</span></a></h2><h3 id="payload" tabindex="-1"><a class="header-anchor" href="#payload"><span>payload</span></a></h3><ul><li>Type: <code>array</code></li></ul><p>The history returned by home-assistant, which is an array of arrays where each array entry contains history objects for one particular entity</p><p>Example output of <code>msg</code>:</p><div class="language-json" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;payload&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;friendly_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Kitchen Light&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mdi:light-switch&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;context&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;850e510e36fb494c9abc79e01e897d54&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;parent_id&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;user_id&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;entity_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;light.kitchen_light&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;last_changed&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-12-28T06:47:28.618000+00:00&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;last_updated&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-12-28T06:47:28.618000+00:00&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">      <span class="token property">&quot;attributes&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;brightness&quot;</span><span class="token operator">:</span> <span class="token number">28</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;friendly_name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Kitchen Light&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;icon&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mdi:light-switch&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;context&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;4d4abe29f2bc43dab39101193f1fefe4&quot;</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;parent_id&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span><span class="token punctuation">,</span></span>
<span class="line">        <span class="token property">&quot;user_id&quot;</span><span class="token operator">:</span> <span class="token null keyword">null</span></span>
<span class="line">      <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;entity_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;light.kitchen_light&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;last_changed&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-12-28T07:48:11.514137+00:00&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;last_updated&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-12-28T07:48:11.514137+00:00&quot;</span><span class="token punctuation">,</span></span>
<span class="line">      <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;on&quot;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">    ...</span>
<span class="line">  <span class="token punctuation">]</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><h2 id="examples" tabindex="-1"><a class="header-anchor" href="#examples"><span>Examples</span></a></h2><p><a class="route-link" href="/node-red-contrib-home-assistant-websocket/cookbook/check-if-an-entity-was-turned-on-in-the-last-24-hours.html">Check if an entity was a certain state in the last 24 hours</a></p><h2 id="references" tabindex="-1"><a class="header-anchor" href="#references"><span>References</span></a></h2><ul><li><a href="https://www.home-assistant.io/integrations/history" target="_blank" rel="noopener noreferrer">Home Assistant History Component</a></li><li><a href="https://developers.home-assistant.io/docs/en/external_api_rest.html#get-apihistoryperiodlttimestamp" target="_blank" rel="noopener noreferrer">Home Assistant API: /api/history/period</a></li></ul></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/zachowj/node-red-contrib-home-assistant-websocket/edit/main/docs/node/get-history.md" aria-label="Help us improve this page!" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]--><!--]-->Help us improve this page!<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><time class="meta-item-info" datetime="2024-08-14T03:40:57.000Z" data-allow-mismatch>8/14/24, 3:40 AM</time></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: 37859597+zachowj@users.noreply.github.com">zachowj</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/node-red-contrib-home-assistant-websocket/node/get-entities.html" aria-label="Get Entities"><!--[--><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span class="external-link">Get Entities</span></div><!--]--></a><a class="route-link auto-link next" href="/node-red-contrib-home-assistant-websocket/node/poll-state.html" aria-label="Poll State"><!--[--><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span class="external-link">Poll State</span></div><!--]--></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/node-red-contrib-home-assistant-websocket/assets/app-DL7QLekj.js" defer></script>
  </body>
</html>
