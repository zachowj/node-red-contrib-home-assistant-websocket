import{_ as r,c as d,a,b as t,e as s,d as n,w as l,r as o,o as p}from"./app-DL7QLekj.js";const h={},u={id:"entity",tabindex:"-1"},g={class:"header-anchor",href:"#entity"};function m(b,e){const i=o("Badge"),c=o("RouteLink");return p(),d("div",null,[e[2]||(e[2]=a("h1",{id:"trigger-state",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#trigger-state"},[a("span",null,"Trigger: state")])],-1)),e[3]||(e[3]=a("p",null,"The Trigger: State node functions similarly to the State Changed Node but provides advanced functionality for common automation use cases. This node allows for more complex conditions and actions based on entity state changes, making it a powerful tool for creating detailed and nuanced automations.",-1)),e[4]||(e[4]=a("h2",{id:"configuration",tabindex:"-1"},[a("a",{class:"header-anchor",href:"#configuration"},[a("span",null,"Configuration")])],-1)),a("h3",u,[a("a",g,[a("span",null,[e[0]||(e[0]=s("Entity ",-1)),n(i,{text:"required"})])])]),e[5]||(e[5]=t('<ul><li><p>Type: <code>string</code></p><p>The entity ID is used to listen for state changes. This can be a entity ID, regex, or a substring. If a regex or substring is used, the node will listen for all entities that match.</p></li></ul><p>Example:</p><ul><li><code>light.kitchen</code> (entity) listens for state changes of the <code>light.kitchen</code> entity</li><li><code>^light.*</code> (regex) listens for state changes of all entities that start with <code>light.</code></li><li><code>light</code> (substring) listens for state changes of all entities that contain <code>light</code> in the entity ID</li></ul><h3 id="state-type" tabindex="-1"><a class="header-anchor" href="#state-type"><span>State Type</span></a></h3><div class="hint-container warning"><p class="hint-container-title">DEPRECATED</p><p>This feature is being phased out and will be removed in version <strong>1.0.0</strong>.<br> Use the <strong>output properties</strong> for state conversion moving forward.</p></div><ul><li>Type: <code>string</code></li><li>Values: <code>string|number|boolean</code></li><li>Default: <code>string</code></li></ul><p>Convert the state of the entity to the selected type. Boolean will be converted to true based on if the string is equal by default to (<code>y|yes|true|on|home|open</code>). Original value stored in msg.data.original_state</p><h3 id="conditions" tabindex="-1"><a class="header-anchor" href="#conditions"><span>Conditions</span></a></h3><p>This node has two default outputs &quot;allowed&quot; and &quot;blocked&quot;. If all the conditions are true the default message will be sent to the &quot;allowed&quot; output otherwise, it will be sent to the &quot;blocked&quot; output.</p><p><strong>See Also:</strong></p>',10)),a("ul",null,[a("li",null,[n(c,{to:"/guide/conditionals.html"},{default:l(()=>[...e[1]||(e[1]=[s("Conditionals",-1)])]),_:1})])]),e[6]||(e[6]=t(`<h3 id="custom-outputs" tabindex="-1"><a class="header-anchor" href="#custom-outputs"><span>Custom Outputs</span></a></h3><p>All the above conditions need to be true for any custom outputs to be sent, having zero conditions is a valid option. Each custom output can send the default message or a custom message. Also, each one can have its constraint on whether or not to be sent.</p><h3 id="output-on-connect" tabindex="-1"><a class="header-anchor" href="#output-on-connect"><span>Output on connect</span></a></h3><ul><li>Type: <code>boolean</code></li></ul><p>Output once on startup/deployment.</p><h3 id="enable-input" tabindex="-1"><a class="header-anchor" href="#enable-input"><span>Enable input</span></a></h3><ul><li>Type: <code>boolean</code></li></ul><p>Enable the input to be used to send a message to the node.</p><h3 id="output-debug-information" tabindex="-1"><a class="header-anchor" href="#output-debug-information"><span>Output debug information</span></a></h3><ul><li>Type: <code>boolean</code></li></ul><p>Output debug information to the debug tab.</p><h3 id="expose-as" tabindex="-1"><a class="header-anchor" href="#expose-as"><span>Expose as</span></a></h3><ul><li>Type: <code>entity config</code></li></ul><p>Creates a switch within Home Assistant to enable/disable this node. This feature requires <a href="https://github.com/zachowj/hass-node-red" target="_blank" rel="noopener noreferrer">Node-RED custom integration</a> to be installed in Home Assistant</p><h2 id="input" tabindex="-1"><a class="header-anchor" href="#input"><span>Input</span></a></h2><p>Input is disabled by default. It can be enabled using the <code>Enable Input</code> option. Input can be used to <a href="#enable-disable">enable/disable</a> the node or for <a href="#testing">testing</a>.</p><h3 id="enable-disable" tabindex="-1"><a class="header-anchor" href="#enable-disable"><span>Enable / Disable</span></a></h3><ul><li>Type: <code>string</code></li></ul><p>If the incoming payload or message is a string and equal to <code>enable</code> or <code>disable</code> then set the node accordingly. Saves over restarts.</p><h2 id="output" tabindex="-1"><a class="header-anchor" href="#output"><span>Output</span></a></h2><h3 id="topic" tabindex="-1"><a class="header-anchor" href="#topic"><span>topic</span></a></h3><ul><li>Type: <code>string</code></li></ul><p>The entity_id that triggered the node</p><h3 id="payload" tabindex="-1"><a class="header-anchor" href="#payload"><span>payload</span></a></h3><ul><li>Type: <code>string</code></li></ul><p>The state as sent by home assistant</p><h3 id="data" tabindex="-1"><a class="header-anchor" href="#data"><span>data</span></a></h3><ul><li>Type: <code>object</code></li></ul><p>The original home assistant event containing <code>entity_id</code> <code>new_state</code> and <code>old_state</code> properties</p><h2 id="testing" tabindex="-1"><a class="header-anchor" href="#testing"><span>Testing</span></a></h2><p>To test automation without having to manually change the state in home assistant send an input <code>payload</code> as an object which contains <code>entity_id</code>, <code>new_state</code>, and <code>old_state</code> properties. This will trigger the node as if the event came from Home Assistant.</p><div class="language-json" data-highlighter="prismjs" data-ext="json"><pre><code class="language-json"><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;entity_id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;test_entity&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;old_state&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;on&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;new_state&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token property">&quot;state&quot;</span><span class="token operator">:</span> <span class="token string">&quot;off&quot;</span></span>
<span class="line">  <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre></div><h2 id="references" tabindex="-1"><a class="header-anchor" href="#references"><span>References</span></a></h2><ul><li><a href="https://home-assistant.io/docs/configuration/state_object" target="_blank" rel="noopener noreferrer">HA State Object</a></li></ul>`,34))])}const y=r(h,[["render",m]]),w=JSON.parse('{"path":"/node/trigger-state.html","title":"Trigger: state","lang":"en-US","frontmatter":{},"git":{"updatedTime":1762741927000,"contributors":[{"name":"zachowj","username":"zachowj","email":"37859597+zachowj@users.noreply.github.com","commits":13,"url":"https://github.com/zachowj"},{"name":"Mauricio Bonani","username":"","email":"bonanitech@gmail.com","commits":1}],"changelog":[{"hash":"d130cab8a86ce67631d99566d989d7752f24847d","time":1762741927000,"email":"37859597+zachowj@users.noreply.github.com","author":"jason","message":"docs: add markdown include plugin and update documentation snippets for Home Assistant nodes"},{"hash":"16f1177bc76471c4d436b6c917d6a6c8fdb1f59f","time":1761531368000,"email":"37859597+zachowj@users.noreply.github.com","author":"jason","message":"feat!: introduce entity state casting and deprecate state type configuration"},{"hash":"b05dd9f5c7798137676a2a4c339140f74f497869","time":1723606857000,"email":"37859597+zachowj@users.noreply.github.com","author":"Jason","message":"doc: Update node documentation for better clarity and consistency"},{"hash":"087088c42ff396ee0c9c35f2eb73f41e16744140","time":1722856632000,"email":"37859597+zachowj@users.noreply.github.com","author":"Jason","message":"docs(trigger-state): Update docs from new entity"},{"hash":"09250fe91be8fa516302fd0ad8778fe030c8be11","time":1665511014000,"email":"37859597+zachowj@users.noreply.github.com","author":"Jason","message":"docs(trigger-state): Update config settings and input"},{"hash":"35e40fe36278bbb4adb03312b32756c6b027351e","time":1665454721000,"email":"37859597+zachowj@users.noreply.github.com","author":"Jason","message":"docs(trigger-state): Remove reference to mustache template for entity id (#699)"},{"hash":"7f65fecc59e3e406fed96c94a011b15f81117470","time":1662358213000,"email":"37859597+zachowj@users.noreply.github.com","author":"Jason","message":"docs: Remove sidebar length"},{"hash":"cf890fa5ce0bdf2615f50c80601a25039794ede0","time":1647350454000,"email":"37859597+zachowj@users.noreply.github.com","author":"Jason","message":"docs: Migrate docs to vuepress v2"},{"hash":"e23ab9cfae9aeeb16fb33b3755cb71e177b389cf","time":1645668226000,"email":"37859597+zachowj@users.noreply.github.com","author":"Jason","message":"feat: Custom strings can be used in select2 selectors by using a # as the suffix"},{"hash":"afac5f8115938d1ca7c942de1888ba77e2edd61d","time":1641057214000,"email":"bonanitech@gmail.com","author":"Mauricio Bonani","message":"docs: Fix typo (#538)"},{"hash":"8aeab34f1cb3c03146a67f6872a4e2804a941ae9","time":1635224005000,"email":"37859597+zachowj@users.noreply.github.com","author":"Jason","message":"refactor(trigger-state): Disable input to the node by default"},{"hash":"358c909363d801698e7a8cd2c83c416c84485beb","time":1601095782000,"email":"37859597+zachowj@users.noreply.github.com","author":"Jason","message":"feat(trigger-state): conditions and custom outputs editable"},{"hash":"7c9762e929809eedd8e1a06d0390e5843e88cc00","time":1578908141000,"email":"37859597+zachowj@users.noreply.github.com","author":"Jason","message":"docs: Change wording"},{"hash":"ad0ac25ed27415514798ad3dc241e74934a4829a","time":1577699988000,"email":"37859597+zachowj@users.noreply.github.com","author":"Jason","message":"docs: Documentation (#179)"}]},"filePathRelative":"node/trigger-state.md"}');export{y as comp,w as data};
