import{_ as t,c as o,b as s,a as r,e as a,d as i,w as c,r as p,o as l}from"./app-DL7QLekj.js";const h={};function d(u,e){const n=p("RouteLink");return l(),o("div",null,[e[3]||(e[3]=s(`<h1 id="server-config" tabindex="-1"><a class="header-anchor" href="#server-config"><span>Server Config</span></a></h1><p>The <strong>Server Config</strong> node defines how Node-RED connects to your Home Assistant instance. It manages connection details, authentication, and various integration settings to ensure a stable connection between Node-RED and Home Assistant.</p><hr><h2 id="connection-settings" tabindex="-1"><a class="header-anchor" href="#connection-settings"><span>Connection Settings</span></a></h2><h3 id="name" tabindex="-1"><a class="header-anchor" href="#name"><span>Name</span></a></h3><ul><li><strong>Type:</strong> <code>string</code></li></ul><p>A user-defined label for this configuration. This name is also used as the <strong>namespace</strong> for related global context data (see <a href="#context">Context</a>).</p><hr><h3 id="using-the-home-assistant-add-on" tabindex="-1"><a class="header-anchor" href="#using-the-home-assistant-add-on"><span>Using the Home Assistant Add-on</span></a></h3><ul><li><strong>Type:</strong> <code>boolean</code></li></ul><p>If you’re running Node-RED as a <strong>Home Assistant Add-on (Hass.io)</strong>, enable this option. No additional configuration (such as URL or access token) is required.</p><hr><h3 id="base-url" tabindex="-1"><a class="header-anchor" href="#base-url"><span>Base URL</span></a></h3><ul><li><strong>Type:</strong> <code>string</code></li></ul><p>The base URL and port of your Home Assistant instance.</p><p><strong>Examples:</strong></p><ul><li><code>http://192.168.0.100:8123</code></li><li><code>https://homeassistant.mysite.com</code></li></ul><hr><h3 id="access-token" tabindex="-1"><a class="header-anchor" href="#access-token"><span>Access Token</span></a></h3><ul><li><strong>Type:</strong> <code>string</code></li></ul><p>A <strong>Long-Lived Access Token</strong> used to authenticate with Home Assistant’s API.</p><hr><h3 id="allow-unauthorized-ssl-certificates" tabindex="-1"><a class="header-anchor" href="#allow-unauthorized-ssl-certificates"><span>Allow Unauthorized SSL Certificates</span></a></h3><ul><li><strong>Type:</strong> <code>boolean</code></li></ul><p>Allows Node-RED to accept <strong>self-signed certificates</strong> when connecting to Home Assistant.</p><hr><h3 id="enable-heartbeat" tabindex="-1"><a class="header-anchor" href="#enable-heartbeat"><span>Enable Heartbeat</span></a></h3><ul><li><strong>Type:</strong> <code>boolean</code></li></ul><p>Enables periodic <strong>ping</strong> messages sent through the WebSocket connection. If no <strong>pong</strong> response is received within 5 seconds, Node-RED automatically attempts to reconnect.</p><hr><h3 id="heartbeat-interval" tabindex="-1"><a class="header-anchor" href="#heartbeat-interval"><span>Heartbeat Interval</span></a></h3><ul><li><strong>Type:</strong> <code>number</code></li></ul><p>Specifies how often (in seconds) the heartbeat ping is sent. The <strong>minimum value</strong> is <strong>10 seconds</strong>.</p><hr><h2 id="config-settings" tabindex="-1"><a class="header-anchor" href="#config-settings"><span>Config Settings</span></a></h2><h3 id="state-boolean" tabindex="-1"><a class="header-anchor" href="#state-boolean"><span>State Boolean</span></a></h3><ul><li><strong>Type:</strong> <code>array of strings</code></li></ul><p>Defines which strings should be interpreted as boolean <code>true</code> when comparing state values. Comparisons are <strong>case-insensitive</strong> and ignore surrounding whitespace.</p><p><strong>Default values:</strong></p><div class="language-text" data-highlighter="prismjs" data-ext="text"><pre><code class="language-text"><span class="line">[&quot;y&quot;, &quot;yes&quot;, &quot;on&quot;, &quot;true&quot;, &quot;home&quot;, &quot;open&quot;]</span>
<span class="line"></span></code></pre></div>`,40)),r("p",null,[e[1]||(e[1]=a("See ",-1)),i(n,{to:"/node/conditions.html#home-assistant-boolean"},{default:c(()=>[...e[0]||(e[0]=[a("Home Assistant Boolean",-1)])]),_:1}),e[2]||(e[2]=a(" for more details.",-1))]),e[4]||(e[4]=s(`<hr><h3 id="enable-global-context-store" tabindex="-1"><a class="header-anchor" href="#enable-global-context-store"><span>Enable Global Context Store</span></a></h3><ul><li><strong>Type:</strong> <code>boolean</code></li></ul><p>When enabled, Home Assistant connection data, states, and services are stored in the Node-RED <strong>global context</strong>. This allows other nodes or function nodes to access Home Assistant data directly.</p><p><strong>Example:</strong></p><div class="language-javascript" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> haCtx <span class="token operator">=</span> global<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;homeassistant&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> configCtx <span class="token operator">=</span> haCtx<span class="token punctuation">.</span>homeAssistant<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> entityState <span class="token operator">=</span> configCtx<span class="token punctuation">.</span>states<span class="token punctuation">[</span><span class="token string">&quot;switch.my_switch&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">return</span> entityState<span class="token punctuation">.</span>state <span class="token operator">===</span> <span class="token string">&quot;on&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><hr><h2 id="ui-settings" tabindex="-1"><a class="header-anchor" href="#ui-settings"><span>UI Settings</span></a></h2><h3 id="cache-autocomplete-results" tabindex="-1"><a class="header-anchor" href="#cache-autocomplete-results"><span>Cache Autocomplete Results</span></a></h3><ul><li><strong>Type:</strong> <code>boolean</code></li></ul><p>Caches JSON autocomplete results for faster UI performance.</p><hr><h3 id="id-selector-display" tabindex="-1"><a class="header-anchor" href="#id-selector-display"><span>ID Selector Display</span></a></h3><p>Determines which text is shown in selectors after an entity ID has been chosen (for example, name, ID, or friendly name).</p><hr><h3 id="status-date-format" tabindex="-1"><a class="header-anchor" href="#status-date-format"><span>Status Date Format</span></a></h3><h4 id="separator" tabindex="-1"><a class="header-anchor" href="#separator"><span>Separator</span></a></h4><p>A string displayed between the <strong>state</strong> and <strong>date</strong> in an event node’s status text.</p><h4 id="additional-options" tabindex="-1"><a class="header-anchor" href="#additional-options"><span>Additional Options</span></a></h4><p>Supports all standard <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat/DateTimeFormat#options" target="_blank" rel="noopener noreferrer">DateTimeFormat Options</a>.</p><hr><h2 id="details" tabindex="-1"><a class="header-anchor" href="#details"><span>Details</span></a></h2><p>Every Home Assistant node in Node-RED must reference a <strong>Server Config</strong> node. This configuration defines how Node-RED connects to and communicates with your Home Assistant instance.</p><hr><h3 id="context" tabindex="-1"><a class="header-anchor" href="#context"><span>Context</span></a></h3><p>Each Server Config node also exposes data in the <strong>global context</strong>, using the configuration’s <strong>Name</strong> (converted to camelCase) as the namespace.</p><p>The following context values are available:</p><table><thead><tr><th>Key</th><th>Description</th><th>Update Behavior</th></tr></thead><tbody><tr><td><code>states</code></td><td>All entity states</td><td>Always kept up to date as state changes occur</td></tr><tr><td><code>services</code></td><td>Available Home Assistant services</td><td>Loaded on initial deploy</td></tr><tr><td><code>events</code></td><td>Available Home Assistant events</td><td>Loaded on initial deploy</td></tr></tbody></table><hr><h3 id="context-example" tabindex="-1"><a class="header-anchor" href="#context-example"><span>Context Example</span></a></h3><p>If your Server Config node is named <strong>Home Assistant</strong> and you have an entity <code>switch.my_switch</code>, you can access its state with:</p><div class="language-javascript" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">const</span> haCtx <span class="token operator">=</span> global<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;homeassistant&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> configCtx <span class="token operator">=</span> haCtx<span class="token punctuation">.</span>homeAssistant<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> entityState <span class="token operator">=</span> configCtx<span class="token punctuation">.</span>states<span class="token punctuation">[</span><span class="token string">&quot;switch.my_switch&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">return</span> entityState<span class="token punctuation">.</span>state <span class="token operator">===</span> <span class="token string">&quot;on&quot;</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre></div><hr><h2 id="connection-issues" tabindex="-1"><a class="header-anchor" href="#connection-issues"><span>Connection Issues</span></a></h2><p>Node-RED communicates with Home Assistant using both the <strong>WebSocket</strong> and <strong>REST API</strong>.</p><p>If you encounter connection issues:</p><ol><li><p>Verify that the Home Assistant API is accessible <strong>from the same host</strong> running Node-RED.</p></li><li><p>Test the connection using a REST client or command line:</p><div class="language-bash" data-highlighter="prismjs" data-ext="sh"><pre><code class="language-bash"><span class="line"><span class="token function">curl</span> <span class="token parameter variable">-H</span> <span class="token string">&quot;Authorization: Bearer &lt;YOUR_LONG_LIVED_ACCESS_TOKEN&gt;&quot;</span> <span class="token punctuation">\\</span></span>
<span class="line">     http://<span class="token operator">&lt;</span>home_assistant_host<span class="token operator">&gt;</span>:8123/api/</span>
<span class="line"></span></code></pre></div></li><li><p>Confirm that your <strong>Base URL</strong> and <strong>Access Token</strong> are correct.</p></li><li><p>Review the Node-RED logs for any connection or authentication errors.</p></li></ol><hr><h2 id="references" tabindex="-1"><a class="header-anchor" href="#references"><span>References</span></a></h2><ul><li><a href="https://home-assistant.io/developers/rest_api" target="_blank" rel="noopener noreferrer">Home Assistant REST API</a></li><li><a href="https://developers.home-assistant.io/docs/auth_api/#long-lived-access-token" target="_blank" rel="noopener noreferrer">Home Assistant Long-Lived Access Tokens</a></li><li><a href="https://nodered.org/docs/user-guide/context" target="_blank" rel="noopener noreferrer">Node-RED Context Documentation</a></li></ul>`,40))])}const m=t(h,[["render",d]]),f=JSON.parse('{"path":"/node/config-server.html","title":"Server Config","lang":"en-US","frontmatter":{},"git":{"updatedTime":1762855171000,"contributors":[{"name":"zachowj","username":"zachowj","email":"37859597+zachowj@users.noreply.github.com","commits":12,"url":"https://github.com/zachowj"}],"changelog":[{"hash":"8b554ee354db60a2e25074657c6d718fa4fdc76f","time":1762855171000,"email":"37859597+zachowj@users.noreply.github.com","author":"jason","message":"feat: add Home Assistant Boolean type to state condition checks"},{"hash":"b05dd9f5c7798137676a2a4c339140f74f497869","time":1723606857000,"email":"37859597+zachowj@users.noreply.github.com","author":"Jason","message":"doc: Update node documentation for better clarity and consistency"},{"hash":"053be1680877db3396cff5a4dc1050ce25f7b987","time":1663824713000,"email":"37859597+zachowj@users.noreply.github.com","author":"Jason","message":"feat(config-server): HA global context data can be enable/disabled"},{"hash":"7f65fecc59e3e406fed96c94a011b15f81117470","time":1662358213000,"email":"37859597+zachowj@users.noreply.github.com","author":"Jason","message":"docs: Remove sidebar length"},{"hash":"c6b2ecd4ea6c7e87fb021ce6512e54fafe87851c","time":1648876775000,"email":"37859597+zachowj@users.noreply.github.com","author":"Jason","message":"feat: Make datetime string in the status text configurable"},{"hash":"cf890fa5ce0bdf2615f50c80601a25039794ede0","time":1647350454000,"email":"37859597+zachowj@users.noreply.github.com","author":"Jason","message":"docs: Migrate docs to vuepress v2"},{"hash":"090e8bfb2336cbb6ab7c8f3611bb5d7ad47c567d","time":1635377498000,"email":"37859597+zachowj@users.noreply.github.com","author":"Jason","message":"feat: Add heartbeat tracker to websocket connection"},{"hash":"a934afc91c4a7c332c81673cef93c606fa507b89","time":1623391614000,"email":"37859597+zachowj@users.noreply.github.com","author":"Jason","message":"refactor: More typescript conversion"},{"hash":"6f90131ec73e694d4c09840cd61a6f7d553e9336","time":1580610716000,"email":"37859597+zachowj@users.noreply.github.com","author":"Jason","message":"docs(config-server): Update context example"},{"hash":"862410e30a513671568a108f55e3c6fe4c5aa170","time":1578295253000,"email":"37859597+zachowj@users.noreply.github.com","author":"Jason","message":"docs(config-server): change name to config server"},{"hash":"25e302fb12511ee7461acbe19994ba3ddd68ff34","time":1577932956000,"email":"37859597+zachowj@users.noreply.github.com","author":"Jason","message":"docs: updates"},{"hash":"7e85b2a7aa14e15bf5fbf66afaea40a3a3254bcc","time":1577880502000,"email":"37859597+zachowj@users.noreply.github.com","author":"Jason","message":"docs: add config-server documentation"}]},"filePathRelative":"node/config-server.md"}');export{m as comp,f as data};
